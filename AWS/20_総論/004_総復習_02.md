## 総復習 02

### 前提

-   ハンズオンで使用するリソースはすべて東京リージョンにあります。
-   リソースを作成する場合も東京リージョンに作成してください。

---

### 問 1

RDS の可用性を向上させる方法を 2 つ答えてください。

---

### 問 2

RDS のコスト効率を向上させる方法を 1 つ答えてください。

---

### 問 3

RDS のパラメーターグループを変更する際の注意点を答えてください。

---

### 問 4

RDS の停止についてコスト観点での注意点を答えてください。

---

### 問 5 　

Aurora は「何か」が 3AZ、1AZ につき 2 か所複製されるため可用性が高い。  
「何か」とは何でしょうか。

---

### 問 6

【ハンズオン】  
作成済みの RDS`workshop0830`からスナップショットを作成してください。

---

### 問 7

ロードバランサーを使うことによるメリットを耐障害性の観点で述べてください。

---

### 問 8

ロードバランサーのターゲットグループとして、ECS で起動したコンテナを紐づけたい。  
この時に選択すべきロードバランサーはどれでしょうか。

---

### 問 9

【ハンズオン】  
以下の仕様のロードバランサーとターゲットグループを作成してください。  
ロードバランサー作成後に、ロードバランサーの DNS にブラウザにアクセスし、  
2 つの EC2 インスタンスへと接続が振り分けられることをブラウザから確認してください。  
(2 つの EC2 インスタンスには異なる HTML を格納しています)

#### ターゲットグループ

-   名前：`workshop0830targetgroup`
-   プロトコル: `HTTP`
-   登録対象の EC2 インスタンス
    -   `workshop0830-1a`
    -   `workshop0830-1c`

#### ロードバランサー

-   ロードバランサーの種類: `Application Load Balancer`
-   ロードバランサーの名前: `workshop0830lb`
-   アベイラビリティーゾーン
    -   `ap-northeast-1a`
    -   `ap-northeast-1c`
-   セキュリティグループ : `httpSgForWorkshop`
-   ターゲットグループ
    -   ターゲットグループ : `既存のターゲットグループ`
    -   名前：`workshop0830targetgroup`

---

### 問 10

【ハンズオン】  
以下の仕様の CloudWatch アラームを作成してください。

-   アラーム名 : `workshop0830-alerm`
-   メトリクスの取得対象の EC2 : `workshop0830-1a`
-   条件
    -   1 分間の`CPU利用率(CPUUtilization)`の最大値が 2 より大きい
-   アラーム名 : `workshop0830-ec2-alert`
-   通知アクション : アラーム状態のときに SNS トピック`workshop0830-ec2-alert-sns`にメッセージを送る

---

### 問 11

あるシステムではアプリケーションのログを EC2 に保存している。  
EC2 自体に障害が発生しても、ログの取得ができるようにしたい。  
この時に有効な機能は何か。

---

### 問 12

【ハンズオン】  
Amazon EventBridge を使って、  
EC2 `workshop0830-1d` を起動する Lambda `workshop0830-start-ec2` を  
毎日 19:00 に実行できるようにしてください。

### 参考

-   [ルールのスケジュール式 - Amazon CloudWatch Events](https://docs.aws.amazon.com/ja_jp/AmazonCloudWatch/latest/events/ScheduledEvents.html)
-   [Amazon CloudWatch Events で cron 式を使う場合は時差に気をつける - Qiita](https://qiita.com/niwasawa/items/6e0b191d6aa21213c7ec)

---
